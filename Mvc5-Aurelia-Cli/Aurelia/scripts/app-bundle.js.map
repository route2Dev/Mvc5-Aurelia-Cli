{"version":3,"sources":["services/auth-config.ts","services/localStorageService.ts","services/auth-helper-service.ts","services/authService.ts","services/auth-step.ts","services/auth-interceptor-service.ts","auth-config.ts","app.ts","environment.ts","home.ts","login.ts","logout.ts","main.ts","nav-bar.ts","random-quote.ts","refresh-token.ts","secret-quote.ts","signup.ts","todo.ts","converters/limit-to.ts","resources/index.ts","services/auth-filter.ts","resources/elements/loading-indicator.ts","D:/projects/spikes/Aurelia/Mvc5-Aurelia-Cli/Mvc5-Aurelia-Cli/Aurelia/src/app.html","D:/projects/spikes/Aurelia/Mvc5-Aurelia-Cli/Mvc5-Aurelia-Cli/Aurelia/src/styles/main.css","D:/projects/spikes/Aurelia/Mvc5-Aurelia-Cli/Mvc5-Aurelia-Cli/Aurelia/src/home.html","D:/projects/spikes/Aurelia/Mvc5-Aurelia-Cli/Mvc5-Aurelia-Cli/Aurelia/src/login.html","D:/projects/spikes/Aurelia/Mvc5-Aurelia-Cli/Mvc5-Aurelia-Cli/Aurelia/src/logout.html","D:/projects/spikes/Aurelia/Mvc5-Aurelia-Cli/Mvc5-Aurelia-Cli/Aurelia/src/nav-bar.html","D:/projects/spikes/Aurelia/Mvc5-Aurelia-Cli/Mvc5-Aurelia-Cli/Aurelia/src/random-quote.html","D:/projects/spikes/Aurelia/Mvc5-Aurelia-Cli/Mvc5-Aurelia-Cli/Aurelia/src/refresh-token.html","D:/projects/spikes/Aurelia/Mvc5-Aurelia-Cli/Mvc5-Aurelia-Cli/Aurelia/src/secret-quote.html","D:/projects/spikes/Aurelia/Mvc5-Aurelia-Cli/Mvc5-Aurelia-Cli/Aurelia/src/signup.html"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class AuthConfig {\r\n\r\n    private _current;\r\n\r\n    constructor() {\r\n    this._current = {\r\n      httpInterceptor: true,\r\n      loginOnSignup: true,\r\n      baseUrl: '/',\r\n      loginRedirect: '#/',\r\n      logoutRedirect: '#/',\r\n      signupRedirect: '#/login',\r\n      loginUrl: '/auth/login',\r\n      signupUrl: '/auth/signup',\r\n      profileUrl: '/auth/me',\r\n      loginRoute: '/login',\r\n      signupRoute: '/signup',\r\n      tokenRoot: false,\r\n      tokenName: 'token',\r\n      idTokenName: 'id_token',\r\n      tokenPrefix: 'aurelia',\r\n      responseTokenProp: 'access_token',\r\n      responseIdTokenProp: 'id_token',\r\n      unlinkUrl: '/auth/unlink/',\r\n      unlinkMethod: 'get',\r\n      authHeader: 'Authorization',\r\n      authToken: 'Bearer',\r\n      withCredentials: true,\r\n      platform: 'browser',\r\n      storage: 'localStorage',\r\n      providers: {\r\n        identSrv: {\r\n          name: 'identSrv',\r\n          url: '/auth/identSrv',\r\n          //authorizationEndpoint: 'http://localhost:22530/connect/authorize',\r\n          redirectUri: window.location.origin || window.location.protocol + '//' + window.location.host,\r\n          scope: ['profile', 'openid'],\r\n          responseType: 'code',\r\n          scopePrefix: '',\r\n          scopeDelimiter: ' ',\r\n          requiredUrlParams: ['scope', 'nonce'],\r\n          optionalUrlParams: ['display', 'state'],\r\n          state: function() {\r\n            let rand = Math.random().toString(36).substr(2);\r\n            return encodeURIComponent(rand);\r\n          },\r\n          display: 'popup',\r\n          type: '2.0',\r\n          clientId: 'jsClient',\r\n          nonce: function() {\r\n            let val = ((Date.now() + Math.random()) * Math.random()).toString().replace('.', '');\r\n            return encodeURIComponent(val);\r\n          },\r\n          popupOptions: { width: 452, height: 633 }\r\n        },\r\n        google: {\r\n          name: 'google',\r\n          url: '/auth/google',\r\n          authorizationEndpoint: 'https://accounts.google.com/o/oauth2/auth',\r\n          redirectUri: window.location.origin || window.location.protocol + '//' + window.location.host,\r\n          scope: ['profile', 'email'],\r\n          scopePrefix: 'openid',\r\n          scopeDelimiter: ' ',\r\n          requiredUrlParams: ['scope'],\r\n          optionalUrlParams: ['display', 'state'],\r\n          display: 'popup',\r\n          type: '2.0',\r\n          state: function() {\r\n            let rand = Math.random().toString(36).substr(2);\r\n            return encodeURIComponent(rand);\r\n          },\r\n          popupOptions: {\r\n            width: 452,\r\n            height: 633\r\n          }\r\n        },\r\n        facebook: {\r\n          name: 'facebook',\r\n          url: '/auth/facebook',\r\n          authorizationEndpoint: 'https://www.facebook.com/v2.3/dialog/oauth',\r\n          redirectUri: window.location.origin + '/' || window.location.protocol + '//' + window.location.host + '/',\r\n          scope: ['email'],\r\n          scopeDelimiter: ',',\r\n          nonce: function() {\r\n            return Math.random();\r\n          },\r\n          requiredUrlParams: ['nonce', 'display', 'scope'],\r\n          display: 'popup',\r\n          type: '2.0',\r\n          popupOptions: {\r\n            width: 580,\r\n            height: 400\r\n          }\r\n        },\r\n        linkedin: {\r\n          name: 'linkedin',\r\n          url: '/auth/linkedin',\r\n          authorizationEndpoint: 'https://www.linkedin.com/uas/oauth2/authorization',\r\n          redirectUri: window.location.origin || window.location.protocol + '//' + window.location.host,\r\n          requiredUrlParams: ['state'],\r\n          scope: ['r_emailaddress'],\r\n          scopeDelimiter: ' ',\r\n          state: 'STATE',\r\n          type: '2.0',\r\n          popupOptions: {\r\n            width: 527,\r\n            height: 582\r\n          }\r\n        },\r\n        github: {\r\n          name: 'github',\r\n          url: '/auth/github',\r\n          authorizationEndpoint: 'https://github.com/login/oauth/authorize',\r\n          redirectUri: window.location.origin || window.location.protocol + '//' + window.location.host,\r\n          optionalUrlParams: ['scope'],\r\n          scope: ['user:email'],\r\n          scopeDelimiter: ' ',\r\n          type: '2.0',\r\n          popupOptions: {\r\n            width: 1020,\r\n            height: 618\r\n          }\r\n        },\r\n        yahoo: {\r\n          name: 'yahoo',\r\n          url: '/auth/yahoo',\r\n          authorizationEndpoint: 'https://api.login.yahoo.com/oauth2/request_auth',\r\n          redirectUri: window.location.origin || window.location.protocol + '//' + window.location.host,\r\n          scope: [],\r\n          scopeDelimiter: ',',\r\n          type: '2.0',\r\n          popupOptions: {\r\n            width: 559,\r\n            height: 519\r\n          }\r\n        },\r\n        twitter: {\r\n          name: 'twitter',\r\n          url: '/auth/twitter',\r\n          authorizationEndpoint: 'https://api.twitter.com/oauth/authenticate',\r\n          type: '1.0',\r\n          popupOptions: {\r\n            width: 495,\r\n            height: 645\r\n          }\r\n        },\r\n        live: {\r\n          name: 'live',\r\n          url: '/auth/live',\r\n          authorizationEndpoint: 'https://login.live.com/oauth20_authorize.srf',\r\n          redirectUri: window.location.origin || window.location.protocol + '//' + window.location.host,\r\n          scope: ['wl.emails'],\r\n          scopeDelimiter: ' ',\r\n          requiredUrlParams: ['display', 'scope'],\r\n          display: 'popup',\r\n          type: '2.0',\r\n          popupOptions: {\r\n            width: 500,\r\n            height: 560\r\n          }\r\n        },\r\n        instagram: {\r\n          name: 'instagram',\r\n          url: '/auth/instagram',\r\n          authorizationEndpoint: 'https://api.instagram.com/oauth/authorize',\r\n          redirectUri: window.location.origin || window.location.protocol + '//' + window.location.host,\r\n          requiredUrlParams: ['scope'],\r\n          scope: ['basic'],\r\n          scopeDelimiter: '+',\r\n          display: 'popup',\r\n          type: '2.0',\r\n          popupOptions: {\r\n            width: 550,\r\n            height: 369\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  get current() {\r\n      return this._current;\r\n  }\r\n\r\n  configure(overrideConfig) {\r\n      this._current = Object.assign({}, this._current, overrideConfig);\r\n  }\r\n}","\r\nexport class LocalStorageService {\r\n    set(key: string, data) {\r\n        localStorage.setItem(key, JSON.stringify(data));\r\n    }\r\n\r\n    get(key: string) {\r\n        return localStorage.getItem(key);\r\n    }\r\n\r\n    remove(key: string) {\r\n        localStorage.removeItem(key);\r\n    }\r\n}","import { inject } from 'aurelia-framework';\r\nimport { AuthConfig } from './auth-config';\r\nimport { LocalStorageService } from './localStorageService';\r\n\r\nexport interface IAuthorizationData {\r\n    accessToken: string;\r\n    tokenType: string;\r\n    refreshToken: string;\r\n    userName: string;\r\n    useRefreshTokens: boolean;\r\n    expiration: Date;\r\n}\r\n\r\n@inject(AuthConfig, LocalStorageService)\r\nexport class AuthHelperService {\r\n\r\n    private _tokenName:string;\r\n    private _initialUrl:string = \"\";\r\n\r\n    constructor(private config : AuthConfig, private storage: LocalStorageService) {                \r\n        this._tokenName = config.current.tokenPreix ? config.current.tokenPrefix + '_' + config.current.tokenName : config.current.tokenName;\r\n    }\r\n\r\n    set intialUrl(value: string) {\r\n        this._initialUrl = value;        \r\n    }\r\n\r\n    get loginRoute() {\r\n        return this.config.current.loginRoute;\r\n    }\r\n\r\n    get loginRedirect() {\r\n        return this._initialUrl || this.config.current.loginRedirect;\r\n    }\r\n\r\n    get logoutRedirect() {\r\n        return this.config.current.logoutRedirect;\r\n    }\r\n\r\n    get clientId() {\r\n        return this.config.current.clientId;\r\n    }\r\n\r\n    saveAuthData(authData: IAuthorizationData) {\r\n        this.storage.set('authorizationData', authData);\r\n    }\r\n\r\n    getAuthData() : IAuthorizationData {\r\n       let data = this.storage.get('authorizationData');\r\n\r\n       return JSON.parse(data);\r\n    }\r\n\r\n    removeAuthData() {\r\n        this.storage.remove('authorizationData');\r\n    }\r\n}","import { inject } from 'aurelia-framework';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport { Router } from 'aurelia-router';\r\n\r\nimport { IAuthorizationData, AuthHelperService } from './auth-helper-service';\r\n\r\ninterface IAuthentication {\r\n    isAuth: boolean;\r\n    userName: string;\r\n    useRefreshTokens: boolean;\r\n}\r\n\r\ninterface IExternalData {\r\n    provider: string;\r\n    userName: string;\r\n    externalAccessToken: string;\r\n}\r\n\r\nexport interface ILoginData {\r\n    userName: string;\r\n    password: string;\r\n    useRefreshTokens: boolean;\r\n}\r\n\r\nexport interface IRegistration extends ILoginData {\r\n    confirmPassword: string;\r\n}\r\n\r\n@inject(HttpClient, Router, AuthHelperService)\r\nexport class AuthService {\r\n\r\n    private _authentication: IAuthentication = {\r\n        isAuth: false,\r\n        userName: \"\",\r\n        useRefreshTokens: false\r\n    };\r\n\r\n    get authentication(): IAuthentication {\r\n        return this._authentication;\r\n    }\r\n\r\n    externalAuthData: IExternalData = {\r\n        provider: \"\",\r\n        userName: \"\",\r\n        externalAccessToken: \"\"\r\n    };\r\n\r\n    isRequesting = false;\r\n\r\n    constructor(private http: HttpClient, private router: Router, private auth: AuthHelperService) {\r\n    }\r\n\r\n    status(response) {\r\n        console.log('status() returned: ' + response.status);\r\n\r\n        if (response.status >= 200 && response.status < 400) {\r\n            return response.json().catch(error => null);\r\n        }\r\n\r\n        return response.json().then((errorMesage) => {\r\n            return Promise.reject(new Error(errorMesage.error_description));\r\n        })\r\n        .catch(error => null);\r\n    }\r\n\r\n    logout() {\r\n        return new Promise(resolve => {\r\n            console.log('User ' + this.authentication.userName + ' is being logged out.');\r\n            this.auth.removeAuthData();\r\n\r\n            this.authentication.isAuth = false;\r\n            this.authentication.userName = '';\r\n\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    /**saveRegistration */\r\n    signUp(registration: IRegistration) {\r\n\r\n        this.logout();\r\n\r\n        return this.http.fetch('api/account/register', {\r\n            method: 'post',\r\n            body: json(registration)\r\n        })\r\n            .then(this.status)\r\n            .then((response) => {\r\n                return response;\r\n            });\r\n    }\r\n\r\n    login(loginData: ILoginData) {\r\n        // data\r\n        let content = \"grant_type=password&username=\" + loginData.userName + \"&password=\" + loginData.password;\r\n\r\n        if (loginData.useRefreshTokens) {\r\n            content = content + \"&client_id=\" + this.auth.clientId;\r\n        }\r\n\r\n        this.isRequesting = true;\r\n\r\n        return this.http.fetch('token', {\r\n            method: 'post',\r\n            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n            body: content\r\n        })\r\n            .then(this.status)\r\n            .then((response) => {\r\n\r\n                let authorizationData: IAuthorizationData;\r\n\r\n                if (loginData.useRefreshTokens) {\r\n                    authorizationData = { accessToken: response.access_token, userName: response.userName, tokenType: \"bearer\", refreshToken: response.refresh_token, useRefreshTokens: true, expiration: response[\".expires\"] };\r\n                } else {\r\n                    authorizationData = { accessToken: response.access_token, userName: response.userName, tokenType: \"bearer\", refreshToken: \"\", useRefreshTokens: false, expiration: response[\".expires\"] };\r\n                }\r\n\r\n                this.auth.saveAuthData(authorizationData);\r\n\r\n                this._authentication.isAuth = true;\r\n                this._authentication.userName = loginData.userName;\r\n                this._authentication.useRefreshTokens = authorizationData.useRefreshTokens;\r\n\r\n                this.isRequesting = false;\r\n\r\n                return response;\r\n            })\r\n            .catch(error => {\r\n                this.isRequesting = false;\r\n                this.logout();\r\n\r\n                throw error;\r\n            });\r\n    }\r\n\r\n    refreshToken() {\r\n        console.log('use refresh tokens called.');\r\n        \r\n        let data = this.auth.getAuthData();\r\n\r\n        if (data && data.useRefreshTokens) {\r\n            let content = \"grant_type=refresh_token&refresh_token=\" + data.refreshToken + \"&client_id=\" + this.auth.clientId;\r\n            this.auth.removeAuthData();\r\n\r\n            console.log('refreshing token with content ' + content);\r\n\r\n            return this.http.fetch('token', {\r\n                method: 'post',\r\n                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n                body: content\r\n            })\r\n            .then(this.status)\r\n            .then(response => {\r\n                let authData = { accessToken: response.access_token, userName: response.userName, tokenType: \"bearer\", refreshToken: response.refresh_token, useRefreshTokens: true, expiration: response[\".expires\"] };\r\n                this.auth.saveAuthData(authData); \r\n\r\n                return response;                              \r\n            })\r\n            .catch(error => {\r\n                this.logout();\r\n                return error;\r\n            });\r\n        }\r\n\r\n        return Promise.resolve();\r\n    }\r\n\r\n    intialize() {\r\n        let data: IAuthorizationData = this.auth.getAuthData();\r\n\r\n        if (data) {\r\n\r\n            this._authentication.isAuth = true;\r\n            this._authentication.userName = data.userName;\r\n            this._authentication.useRefreshTokens = data.useRefreshTokens;\r\n        }\r\n    }\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { PipelineStep, NavigationInstruction, Redirect, Next } from 'aurelia-router';\r\nimport { AuthService } from './authService';\r\nimport { AuthHelperService } from './auth-helper-service';\r\n\r\n@inject(AuthService, AuthHelperService)\r\nexport class AuthStep implements PipelineStep {\r\n\r\n    constructor(private authService: AuthService, private authHelperService:AuthHelperService) {\r\n    }\r\n\r\n    run(routingContext: NavigationInstruction, next: Next)\r\n    {\r\n        let isLoggedIn = this.authService.authentication.isAuth;\r\n        let loginRoute = this.authHelperService.loginRoute;\r\n\r\n         console.log('authstep:' + loginRoute);\r\n         console.log('authstep:' + isLoggedIn);\r\n\r\n        if(!isLoggedIn && routingContext.getAllInstructions().some(i => i.config.settings.auth)) {\r\n            console.log('authstep.initialUrl:' + window.location.href);\r\n            this.authHelperService.intialUrl = window.location.href;\r\n            return next.cancel(new Redirect(loginRoute));\r\n        } \r\n        \r\n        return next();\r\n    }\r\n}","import { inject, Aurelia } from 'aurelia-framework';\r\nimport { HttpClient, Interceptor } from 'aurelia-fetch-client';\r\nimport { Router } from 'aurelia-router';\r\nimport { AuthHelperService } from './auth-helper-service';\r\nimport { AuthService } from './authService';\r\nimport { LocalStorageService } from './localStorageService';\r\n\r\n@inject(Aurelia, AuthHelperService, Router)\r\nexport class AuthInterceptorService implements Interceptor {\r\n    constructor(private aurelia: Aurelia, private auth: AuthHelperService, private router: Router) {\r\n    }\r\n\r\n    request(request: Request) {\r\n\r\n        console.log('auth-interceptor called.');\r\n\r\n        let data = this.auth.getAuthData();\r\n\r\n        if (data) {\r\n            console.log('auth-interceptor: ' + data.tokenType + ' ' + data.accessToken);\r\n\r\n            request.headers.set('Authorization', data.tokenType + ' ' + data.accessToken);\r\n        }\r\n\r\n        return request;\r\n    }\r\n\r\n    handleErrorResponse(response: Response, request: Request) {\r\n        console.log('auth-interceptor response called.');\r\n\r\n        var authService: AuthService = this.aurelia.container.get(AuthService);\r\n\r\n        if (response.status === 401) {\r\n            console.log('auth-Interceptor-Service response error 401.');\r\n            \r\n            let data = this.auth.getAuthData();\r\n\r\n            if (data.useRefreshTokens) {\r\n                console.log('User has enabled refresh tokens. Refreshing token.');\r\n                return authService.refreshToken().then(() => {\r\n                    let data = this.auth.getAuthData();\r\n\r\n                    request.headers.set('Authorization', data.tokenType + ' ' + data.accessToken);\r\n\r\n                    let http : HttpClient = this.aurelia.container.get(HttpClient);\r\n\r\n                    return http.fetch(request);\r\n                       \r\n                });\r\n            }\r\n            // else\r\n\r\n            return authService.logout()\r\n                .then(() => {\r\n                     this.router.navigateToRoute('login');\r\n                })           \r\n        }\r\n        \r\n        return response;\r\n    }\r\n\r\n    responseError(error, request:Request) {\r\n        console.log('auth-interceptor caught error: ' + error);\r\n        if(error instanceof Response) {\r\n            return this.handleErrorResponse(error, request);\r\n        }\r\n\r\n        return Promise.reject(new Error('Invalid response received.'));\r\n    }\r\n}","var config = {\r\n    baseUrl: 'http://localhost:45933',\r\n    signupUrl: 'api/account/register',\r\n    loginUrl: 'token',\r\n    tokenName: 'access_token',\r\n    loginRedirect: \"#/secret-quote\",\r\n    clientId: 'AureliaAuthApp'        \r\n}\r\n\r\nexport default config;","import 'bootstrap'\n\nimport { inject } from 'aurelia-framework'\nimport { Router, RouterConfiguration } from 'aurelia-router';\nimport { HttpClient } from 'aurelia-fetch-client';\n\n// import { AuthorizeStep } from 'aurelia-auth';\n// import {FetchConfig} from 'aurelia-auth';\n\nimport { AuthService } from './services/authService';\nimport { AuthStep } from './services/auth-step';\nimport { AuthInterceptorService } from './services/auth-interceptor-service';\nimport { AuthConfig } from './services/auth-config';\n\nimport config from './auth-config';\n\n@inject(HttpClient, AuthConfig, AuthService, AuthInterceptorService)\n// @inject(FetchConfig)\nexport class App {\n    router: Router;\n\n    // constructor(private fetchConfig: FetchConfig) {\n    constructor(http: HttpClient, private authConfig: AuthConfig, authService: AuthService, private authInterceptorService: AuthInterceptorService) {\n        \n        authConfig.configure(config);\n        authService.intialize();\n\n        http.configure(httpConfig => {\n            httpConfig\n                .useStandardConfiguration()\n                .withBaseUrl('http://localhost:45933/')\n                .withDefaults({                    \n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-Type': 'application/json'\n                    }\n                })\n                .withInterceptor(authInterceptorService);\n        });\n    }\n\n    configureRouter(config: RouterConfiguration, router: Router) {\n        this.router = router;\n        config.title = 'Aurelia Quotes App';\n\n        // Here we hook into the authorize extensibility point\n        // to add a route filter so that we can require authentication\n        // on certain routes\n        config.addPipelineStep('authorize', AuthStep);\n\n        // Here we describe the routes we want along with information about them\n        // such as which they are accessible at, which module they use, and whether\n        // they should be placed in the navigation bar\n        config.map([\n            { route: ['', 'Home'], name: 'Home', moduleId: 'home', nav: true, title: 'Home', settings: { class: 'navbar-brand' } },\n            { route: 'random-quote', name: 'random-quote', moduleId: 'random-quote', nav: true, title: 'Random Quote' },\n            // The secret-quote route is the only one that the user needs to be logged in to see,  so we set auth: true\n            { route: 'secret-quote', name: 'secret-quote', moduleId: 'secret-quote', nav: true, title: 'Super Secret Quote', settings: {auth: true} },\n            { route: 'refresh-token', name: 'refresh-token', moduleId: 'refresh-token', nav: true, title: 'Refresh Token', settings: {auth: true} },\n            { route: 'signup', name: 'signup', moduleId: 'signup', nav: false, title: 'Sign up', authRoute: true },\n            { route: 'login', name: 'login', moduleId: 'login', nav: false, title: 'Login', authRoute: true },\n            { route: 'logout', name: 'logout', moduleId: 'logout', nav: false, title: 'Logout', authRoute: true }\n        ]);\n    }\n\n    activate() {\n        // this.fetchConfig.configure();\n\n    }\n}","export default {\n  debug: true,\n  testing: true\n};\n","export class Home {\r\n    heading = \"Aurelia Quotes\";\r\n    info = \"Aurelia Quotes Application which uses OAuth Bearer Token for authentication and implements Refresh Tokens. The backend API is built using ASP.NET Web API 2, OWIN middleware, and ASP.NET Identity.\";\r\n}","import { inject } from 'aurelia-framework';\r\nimport { Router, Redirect } from 'aurelia-router';\r\nimport { AuthService, ILoginData } from './services/authService';\r\nimport { AuthHelperService } from './services/auth-helper-service';\r\n\r\ninterface UserInfo {\r\n    email: string;\r\n    password: string;\r\n}\r\n\r\n@inject(AuthService, AuthHelperService, Router)\r\nexport class Login {\r\n    heading = \"Login\";\r\n\r\n    email = \"\";\r\n    password = \"\";\r\n    useRefreshTokens = false;\r\n\r\n    loginError = \"\";\r\n\r\n    constructor(private auth: AuthService, private helper: AuthHelperService, private router: Router) {\r\n    }\r\n\r\n    login() {                  \r\n        let loginData : ILoginData = { \r\n            userName: this.email,\r\n            password: this.password,\r\n            useRefreshTokens : this.useRefreshTokens\r\n        };\r\n\r\n        return this.auth.login(loginData)\r\n            .then(response => {\r\n                let redirect = new Redirect(this.helper.loginRedirect);\r\n                redirect.navigate(this.router);\r\n            })\r\n            .catch(error => {\r\n                this.loginError = error;\r\n                console.log(this.loginError);\r\n            });\r\n    }\r\n}","import {inject} from 'aurelia-framework';\r\nimport {Router, Redirect} from 'aurelia-router';\r\n\r\nimport { AuthHelperService } from './services/auth-helper-service';\r\nimport {AuthService} from './services/authService';\r\n\r\n@inject(AuthService, AuthHelperService, Router)\r\nexport class Logout {\r\n    constructor(private authService: AuthService, private helper: AuthHelperService, private router: Router) {}\r\n\r\n    activate() {\r\n        this.authService.logout()\r\n            .then(respone => {\r\n                console.log(\"Logged Out!\");\r\n\r\n                let redirect = new Redirect(this.helper.logoutRedirect);\r\n                redirect.navigate(this.router);\r\n            })\r\n            .catch(err => {\r\n                console.log(\"Error Logging Out\");\r\n            });\r\n    }\r\n}","import {Aurelia} from 'aurelia-framework'\n\nimport config from './auth-config';\nimport environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\n(<any>Promise).config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia: Aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {bindable} from 'aurelia-framework';\r\nimport {inject} from 'aurelia-framework';\r\nimport {AuthService} from './services/authService';\r\n\r\n@inject(AuthService)\r\nexport class NavBar {\r\n    _isAuthenticated = false;\r\n    @bindable router = null;\r\n\r\n    constructor(private auth: AuthService) {\r\n        \r\n    }\r\n\r\n    get isAuthenticated() {\r\n        return this.auth.authentication.isAuth;\r\n    }\r\n\r\n    get userName() {\r\n        return this.auth.authentication.userName;\r\n    }\r\n}\r\n\r\n\r\n","import {inject} from 'aurelia-framework';\r\nimport {HttpClient} from 'aurelia-fetch-client';\r\n\r\n@inject(HttpClient)\r\nexport class RandomQuote {\r\n    heading = \"Random Quote\";\r\n\r\n    randomQuote = \"\";\r\n\r\n    constructor (private httpClient: HttpClient) {        \r\n    }\r\n\r\n    activate() {\r\n        return this.getQuote();\r\n    }\r\n\r\n    getQuote() {       \r\n        console.log('GetQuote() called.');\r\n        return this.httpClient.fetch(\"api/random-quote\")\r\n            .then(response => response.text())\r\n            .then(data => {this.randomQuote = data; console.log('data is ' + data);})                           \r\n            .catch(error => {\r\n                console.log(\"Error getting quote.\");\r\n        });        \r\n    }\r\n}","import { inject } from 'aurelia-framework';\r\nimport { AuthService } from './services/authService';\r\n\r\n@inject(AuthService)\r\nexport class RefreshToken {\r\n    \r\n    auth;\r\n\r\n    constructor(auth: AuthService) {        \r\n        this.auth = auth;\r\n    }    \r\n    \r\n    private _tokenRefreshed : boolean;\r\n\r\n    get tokenRefreshed() {\r\n        return this._tokenRefreshed;\r\n    }\r\n\r\n    private _tokenResponse;\r\n\r\n    get tokenResponse() {\r\n        return this._tokenResponse;\r\n    }\r\n\r\n    activate() {\r\n        console.log('Use RefreshTokens: ' + this.auth.authentication.useRefreshTokens);\r\n        this._tokenRefreshed = false;\r\n        this._tokenResponse = null;\r\n    }\r\n\r\n    refreshToken() {\r\n        this.auth.refreshToken()\r\n        .then(response => {\r\n            console.log('Refresh-Token: ' + response.access_token);\r\n\r\n            this._tokenRefreshed = true;\r\n            this._tokenResponse = response;\r\n        })\r\n    }\r\n}","import {inject} from 'aurelia-framework';\r\nimport {HttpClient} from 'aurelia-fetch-client';\r\n\r\n@inject(HttpClient)\r\nexport class RandomQuote {\r\n    heading = \"Super Secret Quote\";\r\n\r\n    secretQuote = \"\";\r\n\r\n    constructor (private httpClient: HttpClient) {        \r\n    }\r\n\r\n    activate() {      \r\n\r\n        return this.httpClient.fetch(\"api/protected/random-quote\")\r\n            .then(response => response.text())\r\n            .then(data => this.secretQuote = data)            \r\n                           \r\n            .catch(error => {\r\n                console.log(\"Error getting quote.\");\r\n            });\r\n    }\r\n}","import { inject } from 'aurelia-framework';\r\nimport { AuthService, IRegistration } from './services/authService';\r\n\r\ninterface UserInfo {\r\n    email: string;\r\n    password: string;\r\n}\r\n\r\n@inject(AuthService)\r\nexport class Signup {\r\n    heading = \"Sign Up\";\r\n\r\n    email = \"\";\r\n    password = \"\";\r\n\r\n    signupError = \"\";\r\n\r\n    constructor(private auth: AuthService) {\r\n    }\r\n\r\n    signup() {\r\n\r\n        var userInfo : IRegistration = { userName: this.email, password: this.password, confirmPassword: this.password, useRefreshTokens: false };\r\n\r\n        return this.auth.signUp(userInfo)\r\n            .then((response) => {\r\n                console.log(\"Signed Up!\");\r\n            })\r\n            .catch(error => {\r\n                this.signupError = error.response;\r\n            });\r\n    };\r\n}","export class Todo {\r\n    done = false;\r\n\r\n    constructor(public description: string) {}\r\n}","export class LimitToValueConverter{\r\n    toView(value: string, length: number) {\r\n        if(value.length < length) {\r\n            return value;\r\n        }\r\n        \r\n        return value.substr(0, length);\r\n    }\r\n}","import { FrameworkConfiguration } from 'aurelia-framework';\n\nexport function configure(config: FrameworkConfiguration) {\n  config.globalResources(['./elements/loading-indicator']);\n}\n","export class AuthFilterValueConverter {\r\n    toView(routes, isLoggedIn) {\r\n        console.log(isLoggedIn);\r\n        if (isLoggedIn)\r\n            return routes;\r\n\r\n        return routes.filter(r => !r.config.settings.auth);\r\n    }\r\n}","import * as nprogress from 'nprogress';\r\nimport {bindable, noView} from 'aurelia-framework';\r\n\r\n@noView(['nprogress/nprogress.css'])\r\nexport class LoadingIndicator {\r\n  @bindable loading = false;\r\n\r\n  loadingChanged(newValue) {\r\n    if (newValue) {\r\n      nprogress.start();\r\n    } else {\r\n      nprogress.done();\r\n    }\r\n  }\r\n}",null,null,null,null,null,null,null,null,null,null],"sourceRoot":"..\\src"}